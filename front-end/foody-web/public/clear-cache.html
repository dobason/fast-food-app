<!DOCTYPE html>
<html>
<head>
  <title>Clear Service Workers & Cache</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      line-height: 1.6;
    }
    h1 { color: #333; }
    #status { margin-top: 20px; }
    p { padding: 8px; margin: 5px 0; background: #f0f0f0; border-radius: 4px; }
    .success { background: #d4edda; color: #155724; }
    .info { background: #d1ecf1; color: #0c5460; }
  </style>
</head>
<body>
  <h1>ðŸ§¹ Clearing Service Workers & Cache...</h1>
  <div id="status"></div>

  <script>
    const status = document.getElementById('status');

    // Unregister all service workers
    navigator.serviceWorker.getRegistrations().then(function(registrations) {
      if (registrations.length === 0) {
        status.innerHTML += '<p class="info">No service workers registered</p>';
      }
      for(let registration of registrations) {
        registration.unregister().then(() => {
          status.innerHTML += '<p class="success">âœ… Unregistered SW: ' + registration.scope + '</p>';
        });
      }
    });

    // Clear all caches
    caches.keys().then(function(names) {
      if (names.length === 0) {
        status.innerHTML += '<p class="info">No caches found</p>';
      }
      for(let name of names) {
        caches.delete(name).then(() => {
          status.innerHTML += '<p class="success">âœ… Deleted cache: ' + name + '</p>';
        });
      }
    });

    setTimeout(() => {
      status.innerHTML += '<p class="success"><strong>âœ… Done! Now:</strong></p>';
      status.innerHTML += '<p class="info">1. Close this page</p>';
      status.innerHTML += '<p class="info">2. Hard refresh your app (Cmd+Shift+R or Ctrl+Shift+R)</p>';
      status.innerHTML += '<p class="info">3. The import.meta error should be gone!</p>';
    }, 2000);
  </script>
</body>
</html>
